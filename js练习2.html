<!DOCTYPE HTML>
<html>
<head>
<meta charset=utf-8>
<title>js练习2</title>

<script type="text/javascript">
/*	if(window.XMLHttpRequest){
		if(!window.ActiveXobject){
			//火狐 谷歌等
			alert("google");
		}else{
			//IE
			alert("ie");
		}
	}else{
		//IE6
		alert("ie6");
	}*/
</script>
<style>
*{ margin:0; padding:0; }
body{ margin:80px auto 0 auto; width:400px; }
input{ width:55px; height:40px; }
#text{ width:150px; height:30px; text-align:right; }
.Text{ background:blue; text-align:center;  }
</style>
</head>

<body>
<table>
<tr>
	<td colspan=4 class="Text"><input  id="text" type=text name="text" value="" onkeydown="return false"/></td>
</tr>
<tr>
	<td><input type=button name="" value="power" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="clear" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="back" onclick="jsq(this)"/></td>
	<td></td>
</tr>
<tr>
	<td><input type=button name="" value="1" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="2" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="3" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="4" onclick="jsq(this)"/></td>
</tr>
<tr>
	<td><input type=button name="" value="5" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="6" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="7" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="8" onclick="jsq(this)"/></td>
</tr>
<tr>
	<td><input type=button name="" value="9" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="0" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="." onclick="jsq(this)"/></td>
	<td><input type=button name="" value="=" onclick="jsq(this)"/></td>
</tr>
<tr>
	<td><input type=button name="" value="+" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="-" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="*" onclick="jsq(this)"/></td>
	<td><input type=button name="" value="/" onclick="jsq(this)"/></td>
</tr>
</table>
<script type="text/javascript">
var arr = new Array()
var i = 0;
var rec1 = 0,rec2 = 0,recstr = null;
function showAdd(){
	var ii=0;
	var sum=0;
	while(ii < i){
		sum = sum*10+arr[ii];
		ii++;
	}
	return sum;
}
function jsq(event){
	if(!isNaN(event.value)){
		var temp = parseInt(event.value);
		arr[i] = temp;
		i++;
		rec2 = showAdd();
		document.getElementById("text").value = rec2.toString();
	}else{
		switch(event.value){
			case 'power':
				rec2 *= rec2;
				document.getElementById("text").value = rec2.toString();
				break;
			case 'clear':
				rec2 = 0;
				document.getElementById("text").value = rec2.toString();
				break;
			case 'back':
				rec2= parseInt(rec2/10);
				document.getElementById("text").value = rec2.toString();
				break;
		}
		
		if(event.value == '='){
			switch(recstr){
				case '+':
					rec2 += rec1;
					document.getElementById("text").value = rec2.toString();
					break;
				case '-':
					rec2 = rec1 - rec2;
					document.getElementById("text").value = rec2.toString();
					break;
				case '*':
					rec2 *= rec1;
					document.getElementById("text").value = rec2.toString();
					break;
				case '/':
					rec2 = rec1/rec2;
					document.getElementById("text").value = rec2.toString();
					break;
			}
			recstr = null;
			rec1 = 0;
			i = 0;
		}else{
			rec1 = rec2;
			recstr = event.value;
			i = 0;
		}	
	}
}


</script>
</body>
</html>